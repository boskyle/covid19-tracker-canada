(this["webpackJsonpcovid19-tracker-canada"]=this["webpackJsonpcovid19-tracker-canada"]||[]).push([[0],{100:function(e,t,a){},103:function(e,t,a){},110:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(12),o=a.n(r),c=(a(98),a(99),a(74)),s=a(13),i=a(37),l=a(19),d=a(15),u=a(27),b=a(25),h=a(60),p=(a(100),a(153)),v=a(146),j=a(147),m=a(73),f=a(154),O=a(148),x=a(152),y=a(69),g=a(18),D=a(150),w=a(49),Y=a(33),k=a.n(Y),N=a(20),M=a.n(N),C=function(){function e(t,a,n){Object(l.a)(this,e),this.getProvinceCode=function(e){switch(e){case"alberta":return"AB";case"british-columbia":return"BC";case"manitoba":return"MB";case"new-brunswick":return"NB";case"new-foundland-and-labrador":return"NL";case"northwest-territories":return"NT";case"nunavut":return"NU";case"nova-scotia":return"NS";case"ontario":return"ON";case"pei":return"PE";case"quebec":return"QC";case"saskatchewan":return"SK";case"yukon":return"YT";default:return"RP"}},this.getFormattedDate=function(e,t){var a=new Date(e);switch(t){case"daily":return M()(e).format("DD-MM-YYYY");case"weekly":return a.setDate(a.getDate()-7),[M()(e).format("DD-MM-YYYY"),M()(a).format("DD-MM-YYYY")];case"monthly":return a.setDate(a.getDate()-30),[M()(e).format("DD-MM-YYYY"),M()(a).format("DD-MM-YYYY")];default:return e}},this.getFormattedDateDisplay=function(e,t){var a=new Date(e);switch(t){case"daily":return M()(e).format("MMM Do YYYY");case"weekly":return a.setDate(a.getDate()-7),[M()(e).format("MMM Do YYYY"),M()(a).format("MMM Do YYYY")];case"monthly":return a.setDate(a.getDate()-30),[M()(e).format("MMM Do YYYY"),M()(a).format("MMM Do YYYY")];default:return e}},this._province=t,this._prevProvince=a,this._date=n}return Object(d.a)(e,[{key:"displayDate",value:function(e){return Array.isArray(e)?"".concat(e[1]," to ").concat(e[0]):e}},{key:"getData",value:function(){var e=Object(w.a)(k.a.mark((function e(t,a,n){var r,o,c,s,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getProvinceCode(t),o=this.getFormattedDate(a,n),e.next=4,this.getCovid(r,o,n);case 4:return c=e.sent,e.next=7,this.additionalData();case 7:return e.sent.map((function(e){e.short===r&&(s=e)})),"",i=this.displayDate(this.getFormattedDateDisplay(a,n)),e.abrupt("return",{covidInfo:c,provInfo:s,myDate:i});case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getCovid",value:function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.opencovid.ca/timeseries?stat=cases&loc=".concat(t,"&date=").concat(a),Array.isArray(a)&&(n="https://api.opencovid.ca/timeseries?stat=cases&loc=".concat(t,"&before=").concat(a[0],"&after=").concat(a[1])),e.next=4,fetch(n);case 4:return r=e.sent,o=r.json(),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"additionalData",value:function(){var e=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://raw.githubusercontent.com/Clavicus/Testing-Requests/master/canadian-provinces.json",e.next=3,fetch("https://raw.githubusercontent.com/Clavicus/Testing-Requests/master/canadian-provinces.json");case 3:return t=e.sent,a=t.json(),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getLeaderboard",value:function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r,o,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.getFormattedDate(t,a),r=["AB","BC","MB","NB","NL","NT","NU","NS","ON","PE","QC","SK","YT"],o="",c=[],s=0;s<r.length;s++)Array.isArray(n)?Array.isArray(n)?o="https://api.opencovid.ca/timeseries?stat=cases&loc=".concat(r[s],"&before=").concat(n[0],"&after=").concat(n[1]):console.log("DATE INVALID"):o="https://api.opencovid.ca/timeseries?stat=cases&loc=".concat(r[s],"&date=").concat(n),c.push(fetch(o));return e.abrupt("return",Promise.all(c));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),_=C,I=(a(103),a(6)),P=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={updatedLeaderboard:[],listItems:Object(I.jsx)("li",{children:"Empty"})},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log("ProvinceLeaderboard mounted.."),console.log(this.props.leaderboard)}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this;return console.table(this.state.updatedLeaderboard),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h4",{sty:!0,children:"Leaderboard"}),this.state.updatedLeaderboard.map((function(t,a){return Object(I.jsxs)("div",{className:"province-item card m-1",children:[Object(I.jsxs)("p",{className:"m-0",children:[a+1,". ",t.name]}),Object(I.jsx)("small",{className:"m-0",children:Object(I.jsxs)("strong",{children:[e.props.board.option_one," cases:  ",t.cases_sum]})})]})}))]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{updatedLeaderboard:e.leaderboard}}}]),a}(n.Component),S=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=Object(i.a)({},n.state.board);t.option_one=e.target.value,n.setState({board:t})},n.handleProvinceChange=function(e){var t=Object(i.a)({},n.state.board);t.province=e.target.value,n.setState({board:t})},n.goToYesterday=function(e){var t=new Date(e);return t.setDate(t.getDate()-1),t},n.state={board:{option_one:"daily",province:"alberta",date:n.goToYesterday(new Date)},information:{covidInfo:{cases:"not avaiable yet...",cumulative_cases:"not avaiable yet...",date_report:"not avaiable yet...",province:"not avaiable yet..."},provInfo:"",retDate:""},leaderboard:[]},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleProvinceChange=n.handleProvinceChange.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentWillMount",value:function(){var e=this;console.log("i will be invoked before render"),(new _).getLeaderboard(this.state.board.date,this.state.board.option_one).then((function(t){var a=Object(i.a)({},e.state.leaderboard),n=[];t.map((function(e,t){n.push(e.json())})),Promise.all(n).then((function(t){var n=t.map((function(e){var t=0,a="";return e.cases.map((function(e){t+=e.cases,a=e.province})),{name:a,cases_sum:t}}));n.sort((function(e,t){return t.cases_sum-e.cases_sum})).map((function(e,t){console.table(t+1,e)})),a=n,e.setState({leaderboard:a})}))}))}},{key:"componentDidMount",value:function(){var e=this;console.log("Super mounted."),(new _).getData(this.state.board.province,this.state.board.date,this.state.board.option_one).then((function(t){var a=t.covidInfo,n=t.provInfo,r=t.myDate,o=Object(i.a)({},e.state.information);void 0!==a.cases[0]&&(o.covidInfo=a.cases[0]),o.provInfo=n,o.retDate=r,e.setState({information:o})}))}},{key:"componentWillUnmount",value:function(){console.log("Super unmounted.")}},{key:"componentDidUpdate",value:function(e,t){var a=this;console.log("Super updated.");var n=new _;n.getData(this.state.board.province,this.state.board.date,this.state.board.option_one).then((function(e){if(!Object.is(t.board,a.state.board)){var n=e.covidInfo,r=e.provInfo,o=e.myDate,c=Object(i.a)({},a.state.information);if(void 0!==n.cases[0]){if(c.covidInfo=n.cases[0],"weekly"===a.state.board.option_one||"monthly"===a.state.board.option_one){var s=0;n.cases.map((function(e){s+=e.cases})),c.covidInfo.cases=s,console.log(s)}}else c.covidInfo.cases=c.covidInfo.cumulative_cases=c.covidInfo.date_report=c.covidInfo.province="not avaiable yet...";c.provInfo=r,c.retDate=o,a.setState({information:c})}})),n.getLeaderboard(this.state.board.date,this.state.board.option_one).then((function(e){if(!Object.is(t.board,a.state.board)){var n=Object(i.a)({},a.state.leaderboard),r=[];e.map((function(e,t){r.push(e.json())})),Promise.all(r).then((function(e){var t=e.map((function(e){var t=0,a="";return e.cases.map((function(e){t+=e.cases,a=e.province})),{name:a,cases_sum:t}}));t.sort((function(e,t){return t.cases_sum-e.cases_sum})).map((function(e,t){})),n=t,a.setState({leaderboard:n})}))}}))}},{key:"render",value:function(){var e=this;return Object(I.jsx)("div",{className:"mainContainer containerFluid",children:Object(I.jsxs)("div",{className:"row no-gutters h-100",style:{overflow:"auto"},children:[Object(I.jsx)("div",{className:"col-0  col-xl-3 d-flex flex-column align-items-center justify-content-center first-column p-5",children:Object(I.jsxs)("div",{className:"dashboard  w-100 h-75 card",style:{backgroundColor:"#6C8AD7"},children:[Object(I.jsx)("h2",{className:"mt-5 text-center",children:"Control Board"}),Object(I.jsxs)(p.a,{component:"fieldset",children:[Object(I.jsxs)(v.a,{className:"mt-5",children:[Object(I.jsx)(j.a,{component:"legend",children:"Province/Territory"}),Object(I.jsxs)(m.a,{value:this.state.board.province,onChange:this.handleProvinceChange,inputProps:{name:"province"},children:[Object(I.jsx)("option",{value:"alberta",children:"Alberta"}),Object(I.jsx)("option",{value:"british-columbia",children:"British Columbia"}),Object(I.jsx)("option",{value:"manitoba",children:"Manitoba"}),Object(I.jsx)("option",{value:"new-brunswick",children:"New Brunswick"}),Object(I.jsx)("option",{value:"new-foundland-and-labrador",children:"Newfoundland and Labrador"}),Object(I.jsx)("option",{value:"northwest-territories",children:"Northwest Territories"}),Object(I.jsx)("option",{value:"nova-scotia",children:"Nova Scotia"}),Object(I.jsx)("option",{value:"nunavut",children:"Nunavut"}),Object(I.jsx)("option",{value:"ontario",children:"Ontario"}),Object(I.jsx)("option",{value:"pei",children:"Prince Edward Island"}),Object(I.jsx)("option",{value:"quebec",children:"Quebec"}),Object(I.jsx)("option",{value:"saskatchewan",children:"Saskatchewan"}),Object(I.jsx)("option",{value:"yukon",children:"Yukon"})]})]}),Object(I.jsxs)(v.a,{className:"mt-5 p-1",children:[Object(I.jsx)(j.a,{component:"legend",children:"Option"}),Object(I.jsxs)(f.a,{defaultValue:"daily",value:this.state.option_one,onChange:this.handleChange,className:"w-100 d-flex flex-row justify-content-center",children:[Object(I.jsx)(O.a,{value:"daily",control:Object(I.jsx)(x.a,{color:"primary"}),label:"Daily"}),Object(I.jsx)(O.a,{value:"weekly",control:Object(I.jsx)(x.a,{color:"primary"}),label:"Weekly"}),Object(I.jsx)(O.a,{value:"monthly",control:Object(I.jsx)(x.a,{color:"primary"}),label:"Monthly"})]})]}),Object(I.jsx)(v.a,{className:"p-1",children:Object(I.jsx)(g.a,{utils:y.a,children:Object(I.jsx)(D.a,{variant:"inline",label:"Date",value:this.state.board.date,onChange:function(t){var a=Object(i.a)({},e.state.board);a.date=M()(t).format("YYYY-MM-DD"),e.setState({board:a})}})})})]})]})}),Object(I.jsx)("div",{className:"col-12 col-xl-9  d-flex flex-column align-items-center justify-content-center second-column",children:Object(I.jsx)("div",{className:"mapContainer d-flex flex-column align-items-center card mb-2",style:{backgroundColor:"#6C8AD7"},children:Object(I.jsxs)("div",{className:"row no-gutters h-100 w-100 p-3",children:[Object(I.jsx)("div",{className:"col-md-3 d-flex flex-column align-items-center",children:Object(I.jsx)("div",{className:"h-100 w-100 card leaderboardWrapper text-center d-flex flex-column align-items-center",children:Object(I.jsx)(P,{board:this.state.board,leaderboard:this.state.leaderboard})})}),Object(I.jsx)("div",{className:"col-md-9 p-3 d-flex flex-column  align-items-center justify-content-center",children:Object(I.jsxs)("div",{className:"p-5 text-center card covidWrapper",children:[Object(I.jsx)("h1",{className:"display",children:this.state.information.provInfo.name}),Object(I.jsx)("h2",{children:this.state.information.retDate}),Object(I.jsxs)("h2",{children:[this.state.board.option_one," cases:  ",this.state.information.covidInfo.cases]})]})})]})})})]})})}}]),a}(n.Component);a(110);var A=function(){return Object(I.jsx)(c.a,{children:Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(s.c,{children:Object(I.jsx)(s.a,{path:"/",component:S})})})})};o.a.render(Object(I.jsx)(A,{}),document.getElementById("root"))},98:function(e,t,a){},99:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.a8db6a6a.chunk.js.map